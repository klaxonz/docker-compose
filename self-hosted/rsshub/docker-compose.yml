version: '3'

services:
  rsshub:
    # two ways to enable puppeteer:
    # * comment out marked lines, then use this image instead: diygod/rsshub:chromium-bundled
    # * (consumes more disk space and memory) leave everything unchanged
    image: diygod/rsshub:chromium-bundled
    restart: always
    ports:
        - '15011:1200'
    environment:
      NODE_ENV: production
      CACHE_TYPE: redis
      REDIS_URL: 'redis://redis:6379/'
      # PUPPETEER_WS_ENDPOINT: 'ws://browserless:3000'  # marked
    depends_on:
      - redis
      # - browserless  # marked

  redis:
    image: redis:alpine
    restart: always
    volumes:
      - ./redis-data:/data